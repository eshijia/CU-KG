{% extends "base.html" %}

{% block title %}关系建模{% endblock %}

{% block styles %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('relation_model.static', filename='css/relation_model/rm_base.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('relation_model.static', filename='bootstrap-fileinput/css/fileinput.min.css') }}">
{% endblock %}

{% block home_active %}
    <li>
{% endblock %}

{% block relation_model_active %}
    <li class="active">
{% endblock %}

{% block page_content %}
    <div class="container relation-model">
        <div class="upload">
            <form enctype="multipart/form-data" method="POST" action="{{ url_for('relation_model.rm_base') }}">
                <label for="relation_file">导入TXT文件</label>
                <input id="relation_file" type="file" name="file">
            </form>
        </div>
        <hr />
        <div class="graph">
            <div class="graph-hint">
                <label><hr class="hint" id="xian_hint"><span>显式关系</span></label>
                &nbsp;&nbsp;&nbsp;
                <label><hr class="hint" id="ying_hint"><span>隐式关系</span></label>
            </div>
            <div id="graph-container" class="graph-container"></div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('relation_model.static', filename='bootstrap-fileinput/js/fileinput.min.js') }}"></script>
    <script src="{{ url_for('relation_model.static', filename='bootstrap-fileinput/js/fileinput_locale_zh.js') }}"></script>

    <!-- sigmajs -->
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/sigma.core.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/conrad.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/utils/sigma.utils.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/utils/sigma.polyfills.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/sigma.settings.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/classes/sigma.classes.dispatcher.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/classes/sigma.classes.configurable.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/classes/sigma.classes.graph.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/classes/sigma.classes.camera.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/classes/sigma.classes.quad.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/classes/sigma.classes.edgequad.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/captors/sigma.captors.mouse.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/captors/sigma.captors.touch.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/sigma.renderers.canvas.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/sigma.renderers.webgl.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/sigma.renderers.svg.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/sigma.renderers.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/webgl/sigma.webgl.nodes.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/webgl/sigma.webgl.nodes.fast.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/webgl/sigma.webgl.edges.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/webgl/sigma.webgl.edges.fast.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/webgl/sigma.webgl.edges.arrow.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.labels.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.hovers.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.nodes.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edges.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edges.curve.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edges.arrow.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edges.curvedArrow.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.curve.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.arrow.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/canvas/sigma.canvas.extremities.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/svg/sigma.svg.utils.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/svg/sigma.svg.nodes.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/svg/sigma.svg.edges.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/svg/sigma.svg.edges.curve.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/svg/sigma.svg.labels.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/renderers/svg/sigma.svg.hovers.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/middlewares/sigma.middlewares.rescale.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/middlewares/sigma.middlewares.copy.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/misc/sigma.misc.animation.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/misc/sigma.misc.bindEvents.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/misc/sigma.misc.bindDOMEvents.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/src/misc/sigma.misc.drawHovers.js') }}"></script>

    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.plugins.dragNodes/sigma.plugins.dragNodes.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.parsers.json/sigma.parsers.json.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.renderers.edgeLabels/settings.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.def.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.curve.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.curvedArrow.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.plugins.animate/sigma.plugins.animate.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.layout.forceAtlas2/worker.js') }}"></script>
    <script src="{{ url_for('entity_base.static', filename='sigmajs/plugins/sigma.layout.forceAtlas2/supervisor.js') }}"></script>

    <!-- self-utils for sigmajs -->
    <script src="{{ url_for('entity_base.static', filename='sigmajs/graph_util.js') }}"></script>

    <script>
        $("#relation_file").fileinput({
	        allowedFileExtensions : ['txt'],
            maxFileCount: 1
		});

        createGraphVisualizationWithFlag({{ data | tojson | safe }}, 'graph-container');
    </script>
{% endblock %}